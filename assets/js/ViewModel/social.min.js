function Social(){var e=this;e.IDsocial=ko.observable(),e.id=ko.observable(),e.access_token=ko.observable(),e.access_token_secret=ko.observable(),e.IDtipo_cuenta=ko.observable(),e.estatus=ko.observable(),e.listaSocial=ko.observableArray(),e.listaTipoCuenta=ko.observableArray(),e.paginaActual=ko.observable(0),e.paginaFinal=ko.observable(!0),e.busqueda="",e.buscador=ko.observable(),e.modificando=ko.observable(!1),e.obtenerSocial=function(a){a=a||0;var o="";if(""!=e.busqueda)var o=e.busqueda;var r=pathApi+"social/apiobtenersocial/";disableBottonForm("","","lSocial"),e.listaSocial.removeAll(),$.post(r,{pagina:a,busqueda:o},function(a){if(a.estatus)if(a.resultado.length>0){var o=a.resultado;$.each(o,function(a,o){var r="A"==o.estatus?"<a class='label label-success' href='#' title='"+activo+"'><i class='fa fa-check'></i></a>":"P"==o.estatus?"<a class='label label-warning' href='#'><i class='fa fa-clock-o'></i></a>":("I"==o.estatus,"<a class='label label-danger' href='#'><i class='fa fa-times'></i></a>");r={icono:r,valor:o.estatus},o.estatus=r,e.listaSocial.push(o)}),10==a.resultado.length?e.paginaFinal(!1):e.paginaFinal(!0)}else e.paginaActual(e.paginaActual()-1),e.paginaFinal(!0),mostrarMensajeE(error100);else mostrarMensajeE(a.mensaje);enableBottonForm("","","lSocial")},"json").fail(function(e){enableBottonForm("","","lSocial"),mostrarMensajeE(e.responseText)})},e.buscarKey=function(a,o){return 13==o.which&&e.buscar(),!0},e.buscar=function(){e.busqueda=$("#busqueda").val(),e.obtenerSocial(0)},e.guardar=function(){e.modificando()?e.modificar():e.registrar()},e.estatusCambiado=function(a){e.estatus({valor:$("#estatus").val(),imagen:""}),e.estatus($("#estatus").val())},e.btnRegistrar=function(){e.modificando(!1),e.limpiar(),$("#modalSocial").modal("show"),$("#nombre").focus()},e.registrar=function(){var a=pathApi+"social/apiregistrar";$("#frmSocial").valid()&&(disableBottonForm("frmSocial","btnGuardar","lmSocial"),$.post(a,$("#frmSocial").serialize(),function(a){a.estatus?($("#modalSocial").modal("hide"),e.limpiar(),mostrarMensajeS(a.mensaje),e.obtenerSocial(0)):mostrarMensajeE(a.mensaje,"divMensajeESocial"),enableBottonForm("frmSocial","btnGuardar","lmSocial")},"json").fail(function(e){enableBottonForm("frmSocial","btnGuardar","lmSocial"),mostrarMensajeE(e.responseText,"divMensajeESocial")}))},e.btnModificar=function(a){e.limpiar(),e.modificando(!0),e.IDsocial(a.IDsocial),e.id(a.id),e.access_token(a.access_token),e.access_token_secret(a.access_token_secret),e.IDtipo_cuenta(a.IDtipo_cuenta),$("#IDtipo_cuenta").val(a.IDtipo_cuenta),$("#modalSocial").modal("show")},e.modificar=function(){var a=pathApi+"social/apimodificar";$("#frmSocial").valid()&&(disableBottonForm("frmSocial","btnGuardar","lmSocial"),$.post(a,$("#frmSocial").serialize(),function(a){a.estatus?($("#modalSocial").modal("hide"),mostrarMensajeS(a.mensaje),e.limpiar(),e.obtenerSocial(0)):mostrarMensajeE(a.mensaje,"divMensajeESocial"),enableBottonForm("frmSocial","btnGuardar","lmSocial")},"json").fail(function(e){enableBottonForm("frmSocial","btnGuardar","lmSocial"),mostrarMensajeE(e.responseText)}))},e.eliminar=function(a){bootbox.confirm(mensajeConfirmacionEliminar,function(o){if(o){var r=pathApi+"social/apieliminar";disableBottonForm("","","lSocial"),$.post(r,{ID:a.IDsocial},function(o){o.estatus?(mostrarMensajeS(o.mensaje),e.listaSocial().length>=10?e.obtenerSocial(0):e.listaSocial.remove(a)):mostrarMensajeE(o.mensaje),enableBottonForm("","","lSocial")},"json").fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText)})}})},e.paginaSiguiente=function(){e.paginaActual(e.paginaActual()+1),e.obtenerSocial(e.paginaActual())},e.paginaAnterior=function(){0!=e.paginaActual()&&(e.paginaActual(e.paginaActual()-1),e.obtenerSocial(e.paginaActual())),e.paginaFinal(!1)},e.btnCancelar=function(){bootbox.confirm(mensajeConfirmacionModificar,function(a){a&&($("#modalSocial").modal("hide"),e.limpiar())})},e.limpiar=function(){e.IDsocial(""),e.id(""),e.access_token(""),e.access_token_secret(""),e.IDtipo_cuenta(""),e.estatus(""),$("#frmSocial").trigger("reset")},e.obtenerTipoCuenta=function(){var a=pathApi+"tipocuenta/apiobtenertipocuentaactivo";e.listaTipoCuenta.removeAll(),$.getJSON(a).done(function(a){if(a.estatus){var o=a.resultado;e.listaTipoCuenta(o)}else mostrarMensajeE(a.mensaje)}).fail(function(e){mostrarMensajeE(e.responseText)})},e.getPermisoBoton=function(){var a=pathApi+"objeto/obtenerlistapermisoboton";disableBottonForm(),$.post(a,{pantalla:"social"},function(a){if(a.estatus){var o=a.resultado;$.each(o,function(a,o){"registrar"==o.nombre_fisico?e.btnRegistrarV(!0):"modificar"==o.nombre_fisico?e.btnModificarV(!0):"eliminar"==o.nombre_fisico&&e.btnEliminarV(!0)})}else mostrarMensajeE(a.mensaje);enableBottonForm()},"json").fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText)})}}var social=new Social;
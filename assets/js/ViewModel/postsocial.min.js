function PostSocial(){var a=this;a.IDPostSocial=ko.observable(),a.descripcion=ko.observable(),a.abreviatura=ko.observable(),a.estatus=ko.observable(),a.listaPostSocial=ko.observableArray(),a.listaTipo=ko.observableArray([{id:"H",nombre:"Hashtag"},{id:"A",nombre:"@"},{id:"O",nombre:"Otro"}]),a.listaDetalle=ko.observableArray(),a.paginaActual=ko.observable(0),a.paginaFinal=ko.observable(!0),a.busqueda="",a.buscador=ko.observable(),a.modificando=ko.observable(!1),a.obtenerPostSocial=function(e){e=e||0;var o="";if(""!=a.busqueda)var o=a.busqueda;var t=pathApi+"postsocial/apiobtenerpostsocial/";disableBottonForm("","","lPostSocial"),a.listaPostSocial.removeAll(),$.post(t,{pagina:e,busqueda:o},function(e){if(e.estatus)if(e.resultado.length>0){var o=e.resultado;$.each(o,function(e,o){var t="A"==o.Estatus?"<a class='label label-success' href='#' title='"+activo+"'><i class='fa fa-check'></i></a>":"P"==o.Estatus?"<a class='label label-warning' href='#'><i class='fa fa-clock-o'></i></a>":("I"==o.Estatus,"<a class='label label-danger' href='#'><i class='fa fa-times'></i></a>");t={icono:t,valor:o.Estatus},o.Estatus=t,a.listaPostSocial.push(o)}),10==e.resultado.length?a.paginaFinal(!1):a.paginaFinal(!0)}else a.paginaActual(a.paginaActual()-1),a.paginaFinal(!0),mostrarMensajeE(error100);else mostrarMensajeE(e.mensaje);enableBottonForm("","","lPostSocial")},"json").fail(function(a){enableBottonForm("","","lPostSocial"),mostrarMensajeE(a.responseText)})},a.buscarKey=function(e,o){return 13==o.which&&a.buscar(),!0},a.buscar=function(){a.busqueda=$("#busqueda").val(),a.obtenerPostSocial(0)},a.guardar=function(){a.modificando()?a.modificar():a.registrar()},a.estatusCambiado=function(e){a.estatus({valor:$("#estatus").val(),imagen:""}),a.estatus($("#estatus").val())},a.btnRegistrar=function(){a.modificando(!1),a.limpiar(),$("#modalPostSocial").modal("show"),$("#nombre").focus()},a.registrarConfig=function(){var e=pathApi+"postsocial/apiregistrarconfig";$("#frmConfig").valid()&&(disableBottonForm("frmPostSocial","btnGuardar","lmPostSocial"),$.post(e,$("#frmConfig").serialize(),function(e){e.estatus?(a.limpiarConfig(),mostrarMensajeS(e.mensaje),a.btnConfig()):mostrarMensajeE(e.mensaje),enableBottonForm("frmConfig","btnGuardar","lmPostSocial")},"json").fail(function(a){enableBottonForm("frmConfig","btnGuardar","lmPostSocial"),mostrarMensajeE(a.responseText)}))},a.aprobar=function(e){var o=pathApi+"postsocial/apiaprobar";disableBottonForm("","","lmPostSocial"),$.post(o,{ID:e.IDPostSocial},function(e){e.estatus?(mostrarMensajeS(e.mensaje),a.obtenerPostSocial(a.paginaActual())):mostrarMensajeE(e.mensaje),enableBottonForm("","","lmPostSocial")},"json").fail(function(a){enableBottonForm("","","lmPostSocial"),mostrarMensajeE(a.responseText)})},a.modificar=function(){var e=pathApi+"postsocial/apimodificar";$("#frmPostSocial").valid()&&(disableBottonForm("frmPostSocial","btnGuardar","lmPostSocial"),$.post(e,$("#frmPostSocial").serialize(),function(e){e.estatus?($("#modalPostSocial").modal("hide"),mostrarMensajeS(e.mensaje),a.limpiar(),a.obtenerPostSocial(0)):mostrarMensajeE(e.mensaje,"divMensajeEPostSocial"),enableBottonForm("frmPostSocial","btnGuardar","lmPostSocial")},"json").fail(function(a){enableBottonForm("frmPostSocial","btnGuardar","lmPostSocial"),mostrarMensajeE(a.responseText)}))},a.eliminar=function(e){bootbox.confirm(mensajeConfirmacionEliminar,function(o){if(o){var t=pathApi+"postsocial/apieliminar";disableBottonForm("","","lPostSocial"),$.post(t,{ID:postSocial.IDPostSocial},function(o){o.estatus?(mostrarMensajeS(o.mensaje),a.listaPostSocial().length>=10?a.obtenerPostSocial(0):a.listaPostSocial.remove(e)):mostrarMensajeE(o.mensaje),enableBottonForm("","","lPostSocial")},"json").fail(function(a){enableBottonForm(),mostrarMensajeE(a.responseText)})}})},a.paginaSiguiente=function(){a.paginaActual(a.paginaActual()+1),a.obtenerPostSocial(a.paginaActual())},a.paginaAnterior=function(){0!=a.paginaActual()&&(a.paginaActual(a.paginaActual()-1),a.obtenerPostSocial(a.paginaActual())),a.paginaFinal(!1)},a.btnCancelar=function(){bootbox.confirm(mensajeConfirmacionModificar,function(e){e&&($("#modalPostSocial").modal("hide"),a.limpiar())})},a.limpiarConfig=function(){$("#Tipo").val("").trigger("change"),$("#Descripcion").val(""),$("#frmPostSocial").trigger("reset")},a.getPermisoBoton=function(){var e=pathApi+"objeto/obtenerlistapermisoboton";disableBottonForm(),$.post(e,{pantalla:"postsocial"},function(e){if(e.estatus){var o=e.resultado;$.each(o,function(e,o){"registrar"==o.nombre_fisico?a.btnRegistrarV(!0):"modificar"==o.nombre_fisico?a.btnModificarV(!0):"eliminar"==o.nombre_fisico&&a.btnEliminarV(!0)})}else mostrarMensajeE(e.mensaje);enableBottonForm()},"json").fail(function(a){enableBottonForm(),mostrarMensajeE(a.responseText)})},a.verPost=function(a){2==a.IDTipoCuenta&&redirectE("https://twitter.com/Interior/status/"+a.Id)},a.verPostP=function(a){2==a.IDTipoCuenta&&redirectT("https://twitter.com/Interior/status/"+a.Id)},a.obtenerPublicacion=function(){var e=pathApi+"postsocial/apiobtenerpublicacion/";disableBottonForm("","","lPostSocial"),a.listaPostSocial.removeAll(),$.post(e,function(e){e.estatus?a.listaPostSocial(e.resultado):mostrarMensajeE(e.mensaje),enableBottonForm("","","lPostSocial")},"json").fail(function(a){enableBottonForm("","","lPostSocial"),mostrarMensajeE(a.responseText)})},a.btnConfig=function(){var e=pathApi+"postsocial/apiobtenerconfig/";disableBottonForm("","","lPostSocial"),a.listaDetalle.removeAll(),$.post(e,function(e){e.estatus?($.each(e.resultado,function(e,o){var t="H"==o.Tipo?"#":"A"==o.Tipo?"@":"";t={icono:t,valor:o.Tipo},o.Tipo=t,a.listaDetalle.push(o)}),$("#modalConfig").modal("show")):mostrarMensajeE(e.mensaje),enableBottonForm("","","lPostSocial")},"json").fail(function(a){enableBottonForm("","","lPostSocial"),mostrarMensajeE(a.responseText)})},a.eliminarConfig=function(e){bootbox.confirm(mensajeConfirmacionEliminar,function(o){if(o){var t=pathApi+"postsocial/apieliminarconfig";disableBottonForm("","","lPostSocial"),$.post(t,{ID:e.IDPostSocialConfig},function(o){o.estatus?(mostrarMensajeS(o.mensaje),a.listaDetalle.remove(e)):mostrarMensajeE(o.mensaje),enableBottonForm("","","lPostSocial")},"json").fail(function(a){enableBottonForm(),mostrarMensajeE(a.responseText)})}})}}var postSocial=new PostSocial;
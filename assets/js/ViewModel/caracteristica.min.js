function Caracteristica(){var e=this;e.IDcaracteristica=ko.observable(),e.descripcion=ko.observable(),e.estatus=ko.observable(),e.listaCaracteristica=ko.observableArray(),e.paginaActual=ko.observable(0),e.paginaFinal=ko.observable(!0),e.busqueda="",e.buscador=ko.observable(),e.modificando=ko.observable(!1),e.obtenerCaracteristica=function(a){a=a||0;var o="";if(""!=e.busqueda)var o=e.busqueda;var t=pathApi+"caracteristica/apiobtenercaracteristica/";disableBottonForm("","","lCaracteristica"),e.listaCaracteristica.removeAll(),$.post(t,{pagina:a,busqueda:o},function(a){if(a.estatus)if(a.resultado.length>0){var o=a.resultado;$.each(o,function(a,o){var t="A"==o.estatus?"<a class='label label-success' href='#' title='"+activo+"'><i class='fa fa-check'></i></a>":"P"==o.estatus?"<a class='label label-warning' href='#'><i class='fa fa-clock-o'></i></a>":("I"==o.estatus,"<a class='label label-danger' href='#'><i class='fa fa-times'></i></a>");t={icono:t,valor:o.estatus},o.estatus=t,e.listaCaracteristica.push(o)}),10==a.resultado.length?e.paginaFinal(!1):e.paginaFinal(!0)}else e.paginaActual(e.paginaActual()-1),e.paginaFinal(!0),mostrarMensajeE(error100);else mostrarMensajeE(a.mensaje);enableBottonForm("","","lCaracteristica")},"json").fail(function(e){enableBottonForm("","","lCaracteristica"),mostrarMensajeE(e.responseText)})},e.buscarKey=function(a,o){return 13==o.which&&e.buscar(),!0},e.buscar=function(){e.busqueda=$("#busqueda").val(),e.obtenerCaracteristica(0)},e.guardar=function(){e.modificando()?e.modificar():e.registrar()},e.estatusCambiado=function(a){e.estatus({valor:$("#estatus").val(),imagen:""}),e.estatus($("#estatus").val())},e.btnRegistrar=function(){e.modificando(!1),e.limpiar(),$("#modalCaracteristica").modal("show"),$("#nombre").focus()},e.registrar=function(){var a=pathApi+"caracteristica/apiregistrar";$("#frmCaracteristica").valid()&&(disableBottonForm("frmCaracteristica","btnGuardar","lmCaracteristica"),$.post(a,$("#frmCaracteristica").serialize(),function(a){a.estatus?($("#modalCaracteristica").modal("hide"),e.limpiar(),mostrarMensajeS(a.mensaje),e.obtenerCaracteristica(0)):mostrarMensajeE(a.mensaje,"divMensajeECaracteristica"),enableBottonForm("frmCaracteristica","btnGuardar","lmCaracteristica")},"json").fail(function(e){enableBottonForm("frmCaracteristica","btnGuardar","lmCaracteristica"),mostrarMensajeE(e.responseText,"divMensajeECaracteristica")}))},e.btnModificar=function(a){e.limpiar(),e.modificando(!0),e.IDcaracteristica(a.IDcaracteristica),e.descripcion(a.descripcion),$("#modalCaracteristica").modal("show")},e.modificar=function(){var a=pathApi+"caracteristica/apimodificar";$("#frmCaracteristica").valid()&&(disableBottonForm("frmCaracteristica","btnGuardar","lmCaracteristica"),$.post(a,$("#frmCaracteristica").serialize(),function(a){a.estatus?($("#modalCaracteristica").modal("hide"),mostrarMensajeS(a.mensaje),e.limpiar(),e.obtenerCaracteristica(0)):mostrarMensajeE(a.mensaje,"divMensajeECaracteristica"),enableBottonForm("frmCaracteristica","btnGuardar","lmCaracteristica")},"json").fail(function(e){enableBottonForm("frmCaracteristica","btnGuardar","lmCaracteristica"),mostrarMensajeE(e.responseText)}))},e.eliminar=function(a){bootbox.confirm(mensajeConfirmacionEliminar,function(o){if(o){var t=pathApi+"caracteristica/apieliminar";disableBottonForm("","","lCaracteristica"),$.post(t,{ID:a.IDcaracteristica},function(o){o.estatus?(mostrarMensajeS(o.mensaje),e.listaCaracteristica().length>=10?e.obtenerCaracteristica(0):e.listaCaracteristica.remove(a)):mostrarMensajeE(o.mensaje),enableBottonForm("","","lCaracteristica")},"json").fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText)})}})},e.paginaSiguiente=function(){e.paginaActual(e.paginaActual()+1),e.obtenerCaracteristica(e.paginaActual())},e.paginaAnterior=function(){0!=e.paginaActual()&&(e.paginaActual(e.paginaActual()-1),e.obtenerCaracteristica(e.paginaActual())),e.paginaFinal(!1)},e.btnCancelar=function(){bootbox.confirm(mensajeConfirmacionModificar,function(a){a&&($("#modalCaracteristica").modal("hide"),e.limpiar())})},e.limpiar=function(){e.IDcaracteristica(""),e.descripcion(""),e.estatus(""),$("#frmCaracteristica").trigger("reset")},e.getPermisoBoton=function(){var a=pathApi+"objeto/obtenerlistapermisoboton";disableBottonForm(),$.post(a,{pantalla:"caracteristica"},function(a){if(a.estatus){var o=a.resultado;$.each(o,function(a,o){"registrar"==o.nombre_fisico?e.btnRegistrarV(!0):"modificar"==o.nombre_fisico?e.btnModificarV(!0):"eliminar"==o.nombre_fisico&&e.btnEliminarV(!0)})}else mostrarMensajeE(a.mensaje);enableBottonForm()},"json").fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText)})}}var caracteristica=new Caracteristica;
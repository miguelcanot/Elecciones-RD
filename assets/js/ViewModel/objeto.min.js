function Objeto(){var e=this;e.IDobjeto=ko.observable(),e.nombre_logico=ko.observable(),e.nombre_fisico=ko.observable(),e.tipo_objeto=ko.observable(),e.IDobjeto_relacionado=ko.observable(),e.objetoRelacionado=ko.observable(),e.estatus=ko.observable(),e.listaObjeto=ko.observableArray(),e.listaObjetoRelacion=ko.observableArray(),e.listaTipoObjeto=ko.observableArray([{id:"P",nombre:"Pantalla"},{id:"B",nombre:"Boton"}]),e.paginaActual=ko.observable(0),e.paginaFinal=ko.observable(!0),e.busqueda="",e.buscador=ko.observable(),e.modificando=ko.observable(!1),e.obtenerObjeto=function(a){a=a||0;var o="";if(""!=e.busqueda)var o=e.busqueda;var t=pathApi+"objeto/apiobtenerobjeto/";disableBottonForm("frmBuscador","btnBuscar"),e.listaObjeto.removeAll(),$.post(t,{pagina:a,busqueda:o},function(a){if(a.estatus)if(a.resultado.length>0){var o=a.resultado;$.each(o,function(a,o){var t="A"==o.estatus?"<a class='label label-success' href='#' title='"+activo+"'><i class='fa fa-check'></i></a>":"P"==o.estatus?"<a class='label label-warning' href='#'><i class='fa fa-clock-o'></i></a>":("I"==o.estatus,"<a class='label label-danger' href='#'><i class='fa fa-times'></i></a>");t={icono:t,valor:o.estatus};var r=new Objeto;r.IDobjeto(o.IDobjeto),r.nombre_fisico(o.nombre_fisico),r.nombre_logico(o.nombre_logico),r.tipo_objeto(o.tipo_objeto),r.IDobjeto_relacionado(o.IDobjeto_relacionado),r.objetoRelacionado(o.objetoRelacionado),r.estatus(t),e.listaObjeto.push(r)}),10==a.resultado.length?e.paginaFinal(!1):e.paginaFinal(!0)}else e.paginaActual(e.paginaActual()-1),e.paginaFinal(!0),mostrarMensajeE(error100);else mostrarMensajeE(a.mensaje);enableBottonForm("frmBuscador","btnBuscar")},"json").fail(function(e){enableBottonForm("frmBuscador","btnBuscar"),mostrarMensajeE(e.responseText)})},e.buscarKey=function(a,o){return 13==o.which&&e.buscar(),!0},e.buscar=function(){e.busqueda=$("#busqueda").val(),e.obtenerObjeto(0)},e.guardar=function(){e.modificando()?e.modificar():e.registrar()},e.estatusCambiado=function(a){e.estatus({valor:$("#estatus").val(),icono:""}),e.estatus($("#estatus").val())},e.btnRegistrar=function(){e.modificando(!1),e.limpiar(),$("#modalObjeto").modal("show")},e.registrar=function(){var a=pathApi+"objeto/apiregistrar";$("#frmObjeto").valid()&&(disableBottonForm("frmObjeto","btnGuardar"),$.post(a,$("#frmObjeto").serialize(),function(a){a.estatus?($("#modalObjeto").modal("hide"),e.limpiar(),mostrarMensajeS(a.mensaje),e.obtenerObjeto(0)):mostrarMensajeE(a.mensaje,"divMensajeEObjeto"),enableBottonForm("frmObjeto","btnGuardar")},"json").fail(function(e){enableBottonForm("frmObjeto","btnGuardar"),mostrarMensajeE(data.responseText,"divMensajeEObjeto")}))},e.btnModificar=function(a){e.limpiar(),e.modificando(!0),e.IDobjeto(a.IDobjeto()),e.nombre_fisico(a.nombre_fisico()),e.nombre_logico(a.nombre_logico()),e.tipo_objeto(a.tipo_objeto()),e.IDobjeto_relacionado(a.IDobjeto_relacionado()),$("#tipo_objeto").val(a.tipo_objeto()),$("#IDobjeto_relacionado").val(a.IDobjeto_relacionado()),$("#modalObjeto").modal("show")},e.modificar=function(){var a=pathApi+"objeto/apimodificar";$("#frmObjeto").valid()&&(disableBottonForm("frmObjeto","btnGuardar"),$.post(a,$("#frmObjeto").serialize(),function(a){a.estatus?($("#modalObjeto").modal("hide"),mostrarMensajeS(a.mensaje),e.limpiar(),e.obtenerObjeto(0)):mostrarMensajeE(a.mensaje,"divMensajeEObjeto"),enableBottonForm("frmObjeto","btnGuardar")},"json").fail(function(e){enableBottonForm("frmObjeto","btnGuardar"),mostrarMensajeE(data.responseText,"divMensajeEObjeto")}))},e.eliminar=function(a){bootbox.confirm(mensajeConfirmacionEliminar,function(o){if(o){var t=pathApi+"objeto/apieliminar";disableBottonForm(),$.post(t,{IDobjeto:a.IDobjeto},function(o){o.estatus?(mostrarMensajeS(o.mensaje),e.listaObjeto().length>=10?e.obtenerObjeto(0):e.listaObjeto.remove(a)):mostrarMensajeE(o.mensaje),enableBottonForm()},"json").fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText)})}})},e.paginaSiguiente=function(){e.paginaActual(e.paginaActual()+1),e.obtenerObjeto(e.paginaActual())},e.paginaAnterior=function(){0!=e.paginaActual()&&(e.paginaActual(e.paginaActual()-1),e.obtenerObjeto(e.paginaActual())),e.paginaFinal(!1)},e.btnCancelar=function(){bootbox.confirm(mensajeConfirmacionModificar,function(a){a&&($("#modalObjeto").modal("hide"),e.limpiar())})},e.obtenerContenido=function(){e.obtenerObjeto();var a=pathApi+"objeto/apiobtenercontenido";$.getJSON(a).done(function(a){if(a.estatus){var o=a.resultado;e.listaObjetoRelacion.removeAll(),$.each(o.listaObjeto,function(a,o){e.listaObjetoRelacion.push(o)})}else mostrarMensajeE(a.mensaje)}).fail(function(e){mostrarMensajeE(e.responseText)})},e.agregarCuenta=function(){var a=$("#tipoCuenta option:selected").val();if(""!=a){var o=ko.utils.arrayFirst(e.listaTipoCuenta(),function(e){return e.IDtipo_cuenta()==a});o.url(""),e.listaTipoCuentaAgregada.push(o),e.listaTipoCuenta.remove(o)}},e.eliminarCuenta=function(a){e.listaTipoCuenta.push(a),e.listaTipoCuentaAgregada.remove(a)},e.limpiar=function(){e.IDobjeto(""),e.nombre_fisico(""),e.nombre_logico(""),e.estatus(""),$("#IDobjeto_relacionado").val("").trigger("change"),$("#frmObjeto").trigger("reset")},e.getObjetoId=function(a){var o=pathApi+"apiobjeto/getobjetoid/"+a;disableBottonForm(),$.getJSON(o).done(function(a){if(a.estatus){var o=a.resultado;e.nombreLogico(o.NombreLogico),e.nombreFisico(o.NombreFisico),e.tipoObjeto(o.TipoObjeto),e.objetoRelacionado(o.IDObjetoRelacionado),e.id(o.IDObjeto),objeto.llenarListaObjetoRelacion(),e.tipoObjetoSeleccionado([o.TipoObjeto])}else mostrarMensajeE(a.mensaje);enableBottonForm()}).fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText)})}}function TipoCuenta(){var e=this;e.IDtipo_cuenta=ko.observable(),e.nombre=ko.observable(),e.url=ko.observable()}var objeto=new Objeto;
function Rol(){var e=this;e.IDrol=ko.observable(),e.nombre=ko.observable(),e.descripcion=ko.observable(),e.estatus=ko.observable(),e.listaRol=ko.observableArray(),e.paginaActual=ko.observable(0),e.paginaFinal=ko.observable(!0),e.busqueda="",e.buscador=ko.observable(),e.modificando=ko.observable(!1),e.listaObjeto=ko.observableArray(),e.listaRolObjeto=ko.observableArray(),e.obtenerRol=function(a){a=a||0;var o="";if(""!=e.busqueda)var o=e.busqueda;var r=pathApi+"rol/apiobtenerrol/";disableBottonForm("frmBuscador","btnBuscar"),e.listaRol.removeAll(),$.post(r,{pagina:a,busqueda:o},function(a){if(a.estatus)if(a.resultado.length>0){var o=a.resultado;$.each(o,function(a,o){var r="A"==o.estatus?"<a class='label label-success' href='#' title='"+activo+"'><i class='fa fa-check'></i></a>":"P"==o.estatus?"<a class='label label-warning' href='#'><i class='fa fa-clock-o'></i></a>":("I"==o.estatus,"<a class='label label-danger' href='#'><i class='fa fa-times'></i></a>");r={icono:r,valor:o.estatus};var t=new Rol;t.IDrol(o.IDrol),t.estatus(r),t.nombre(o.nombre),t.descripcion(o.descripcion),e.listaRol.push(t)}),10==a.resultado.length?e.paginaFinal(!1):e.paginaFinal(!0)}else e.paginaActual(e.paginaActual()-1),e.paginaFinal(!0),mostrarMensajeE(error100);else mostrarMensajeE(a.mensaje);enableBottonForm("frmBuscador","btnBuscar")},"json").fail(function(e){enableBottonForm("frmBuscador","btnBuscar"),mostrarMensajeE(e.responseText)})},e.buscarKey=function(a,o){return 13==o.which&&e.buscar(),!0},e.buscar=function(){e.busqueda=$("#busqueda").val(),e.obtenerRol(0)},e.guardar=function(){e.modificando()?e.modificar():e.registrar()},e.estatusCambiado=function(a){e.estatus({valor:$("#estatus").val(),imagen:""}),e.estatus($("#estatus").val())},e.btnRegistrar=function(){e.modificando(!1),e.limpiar(),$("#modalRol").modal("show"),$("#nombre").focus()},e.registrar=function(){var a=pathApi+"rol/apiregistrar";$("#frmRol").valid()&&(disableBottonForm("frmRol","btnGuardar"),$.post(a,$("#frmRol").serialize(),function(a){a.estatus?($("#modalRol").modal("hide"),e.limpiar(),mostrarMensajeS(a.mensaje),e.obtenerRol(0)):mostrarMensajeE(a.mensaje,"divMensajeERol"),enableBottonForm("frmRol","btnGuardar")},"json").fail(function(e){enableBottonForm("frmRol","btnGuardar"),mostrarMensajeE(e.responseText,"divMensajeERol")}))},e.btnModificar=function(a){e.limpiar(),e.modificando(!0),e.IDrol(a.IDrol()),e.nombre(a.nombre()),e.descripcion(a.descripcion()),$("#modalRol").modal("show")},e.modificar=function(){var a=pathApi+"rol/apimodificar";$("#frmRol").valid()&&(disableBottonForm("frmRol","btnGuardar"),$.post(a,$("#frmRol").serialize(),function(a){a.estatus?($("#modalRol").modal("hide"),mostrarMensajeS(a.mensaje),e.limpiar(),e.obtenerRol(0)):mostrarMensajeE(a.mensaje,"divMensajeERol"),enableBottonForm("frmRol","btnGuardar")},"json").fail(function(e){enableBottonForm("frmRol","btnGuardar"),mostrarMensajeE(e.responseText)}))},e.eliminar=function(a){bootbox.confirm(mensajeConfirmacionEliminar,function(o){if(o){var r=pathApi+"rol/apieliminar";disableBottonForm(),$.post(r,{IDrol:a.IDrol},function(o){o.estatus?(mostrarMensajeS(o.mensaje),e.listaRol().length>=10?e.obtenerRol(0):e.listaRol.remove(a)):mostrarMensajeE(o.mensaje),enableBottonForm()},"json").fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText)})}})},e.paginaSiguiente=function(){e.paginaActual(e.paginaActual()+1),e.obtenerRol(e.paginaActual())},e.paginaAnterior=function(){0!=e.paginaActual()&&(e.paginaActual(e.paginaActual()-1),e.obtenerRol(e.paginaActual())),e.paginaFinal(!1)},e.btnCancelar=function(){bootbox.confirm(mensajeConfirmacionModificar,function(a){a&&($("#modalRol").modal("hide"),e.limpiar())})},e.limpiar=function(){e.IDrol(""),e.nombre(""),e.descripcion(""),e.estatus(""),$("#frmRol").trigger("reset")},e.btnPermiso=function(a){e.IDrol(a.IDrol()),e.obtenerObjetoSinAsignar(a.IDrol())},e.obtenerObjetoSinAsignar=function(a){var a=a||0,o=pathApi+"objeto/apiobtenerobjetosinasignar/";disableBottonForm(),$.post(o,{ID:a},function(o){if(o.estatus){var r=o.resultado;e.listaObjeto(r),e.obtenerObjetoAsignado(a)}else mostrarMensajeE(o.mensaje),enableBottonForm()},"json").fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText)})},e.obtenerObjetoAsignado=function(a){var a=a||0,o=pathApi+"objeto/apiobtenerobjetoasignado/";$.post(o,{ID:a},function(a){if(a.estatus){var o=a.resultado;e.listaRolObjeto(o)}else mostrarMensajeE(a.mensaje);enableBottonForm(),$("#modalPermiso").modal("show"),$("#filtro").focus()},"json").fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText)})},e.agregarObjeto=function(a){var o=pathApi+"objeto/apiregistrarpermiso/";disableBottonForm("frmPermiso"),$.post(o,{IDrol:e.IDrol(),IDobjeto:a.IDobjeto},function(o){o.estatus?(e.listaRolObjeto.push(a),e.listaObjeto.remove(a),mostrarMensajeS(o.mensaje,"divMensajeSPermiso")):mostrarMensajeE(o.mensaje,"divMensajeEPermiso"),enableBottonForm("frmPermiso")},"json").fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText,"divMensajeEPermiso")})},e.quitarObjeto=function(a){var o=pathApi+"objeto/apieliminarpermiso/";disableBottonForm("frmPermiso"),$.post(o,{IDrol:e.IDrol(),IDobjeto:a.IDobjeto},function(o){o.estatus?(e.listaObjeto.push(a),e.listaRolObjeto.remove(a),mostrarMensajeS(o.mensaje,"divMensajeSPermiso")):mostrarMensajeE(o.mensaje,"divMensajeEPermiso"),enableBottonForm("frmPermiso")},"json").fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText,"divMensajeEPermiso")})},e.getPermisoBoton=function(){var a=pathApi+"objeto/obtenerlistapermisoboton";disableBottonForm(),$.post(a,{pantalla:"rol"},function(a){if(a.estatus){var o=a.resultado;$.each(o,function(a,o){"registrar"==o.NombreFisico?e.btnRegistrarV(!0):"modificar"==o.NombreFisico?e.btnModificarV(!0):"eliminar"==o.NombreFisico?e.btnEliminarV(!0):"permiso"==o.NombreFisico&&e.btnPermisoV(!0)})}else mostrarMensajeE(a.mensaje);enableBottonForm()},"json").fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText)})}}var rol=new Rol;
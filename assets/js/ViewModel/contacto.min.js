function Contacto(){var e=this;e.IDmensaje_contacto=ko.observable(),e.nombre=ko.observable(),e.correo=ko.observable(),e.telefono=ko.observable(),e.fecha=ko.observable(),e.mensaje=ko.observable(),e.estatus=ko.observable(),e.listaContacto=ko.observableArray(),e.paginaActual=ko.observable(0),e.paginaFinal=ko.observable(!0),e.busqueda="",e.buscador=ko.observable(),e.modificando=ko.observable(!1),e.obtenerContacto=function(a){a=a||0;var o="";if(""!=e.busqueda)var o=e.busqueda;var t=pathApi+"contacto/apiobtenercontacto/";disableBottonForm("frmBuscador","btnBuscar"),e.listaContacto.removeAll(),$.post(t,{pagina:a,busqueda:o},function(a){if(a.estatus)if(a.resultado.length>0){var o=a.resultado;$.each(o,function(a,o){var t="A"==o.estatus?"<a class='label label-success' href='#' title='"+activo+"'><i class='fa fa-check'></i></a>":"P"==o.estatus?"<a class='label label-warning' href='#'><i class='fa fa-clock-o'></i></a>":("I"==o.estatus,"<a class='label label-danger' href='#'><i class='fa fa-times'></i></a>");t={icono:t,valor:o.estatus};var r=new Contacto;r.IDmensaje_contacto(o.IDmensaje_contacto),r.estatus(t),r.nombre(o.nombre),r.correo(o.correo),r.telefono(o.telefono),r.fecha(o.fecha),r.mensaje(o.mensaje),e.listaContacto.push(r)}),10==a.resultado.length?e.paginaFinal(!1):e.paginaFinal(!0)}else e.paginaActual(e.paginaActual()-1),e.paginaFinal(!0),mostrarMensajeE(error100);else mostrarMensajeE(a.mensaje);enableBottonForm("frmBuscador","btnBuscar")},"json").fail(function(e){enableBottonForm("frmBuscador","btnBuscar"),mostrarMensajeE(e.responseText)})},e.buscarKey=function(a,o){return 13==o.which&&e.buscar(),!0},e.buscar=function(){e.busqueda=$("#busqueda").val(),e.obtenerContacto(0)},e.estatusCambiado=function(a){e.estatus({valor:$("#estatus").val(),imagen:""}),e.estatus($("#estatus").val())},e.btnModificar=function(a){e.limpiar(),e.modificando(!0),e.IDmensaje_contacto(a.IDmensaje_contacto()),e.mensaje(a.mensaje()),$("#modalContacto").modal("show")},e.eliminar=function(a){bootbox.confirm(mensajeConfirmacionEliminar,function(o){if(o){var t=pathApi+"contacto/apieliminar";disableBottonForm(),$.post(t,{IDmensaje_contacto:a.IDmensaje_contacto},function(o){o.estatus?(mostrarMensajeS(o.mensaje),e.listaContacto().length>=10?e.obtenerContacto(0):e.listaContacto.remove(a)):mostrarMensajeE(o.mensaje),enableBottonForm()},"json").fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText)})}})},e.paginaSiguiente=function(){e.paginaActual(e.paginaActual()+1),e.obtenerContacto(e.paginaActual())},e.paginaAnterior=function(){0!=e.paginaActual()&&(e.paginaActual(e.paginaActual()-1),e.obtenerContacto(e.paginaActual())),e.paginaFinal(!1)},e.btnCancelar=function(){bootbox.confirm(mensajeConfirmacionModificar,function(a){a&&($("#modalContacto").modal("hide"),e.limpiar())})},e.limpiar=function(){e.IDmensaje_contacto(""),e.mensaje(""),e.estatus(""),$("#frmContacto").trigger("reset")},e.getPermisoBoton=function(){var a=pathApi+"objeto/obtenerlistapermisoboton";disableBottonForm(),$.post(a,{pantalla:"contacto"},function(a){if(a.estatus){var o=a.resultado;$.each(o,function(a,o){"registrar"==o.NombreFisico?e.btnRegistrarV(!0):"modificar"==o.NombreFisico?e.btnModificarV(!0):"eliminar"==o.NombreFisico?e.btnEliminarV(!0):"permiso"==o.NombreFisico&&e.btnPermisoV(!0)})}else mostrarMensajeE(a.mensaje);enableBottonForm()},"json").fail(function(e){enableBottonForm(),mostrarMensajeE(e.responseText)})}}var contacto=new Contacto;